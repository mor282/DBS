{% extends "layout.html" %}
{% block body %}
<script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {
        packages: ["corechart"]
      });
      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        var listbox = document.getElementById("chart");
        var selIndex = listbox.selectedIndex;
        var selValue = listbox.options[selIndex].value;
        var selText = listbox.options[selIndex].text;
        //console.log(selValue);
        var data = google.visualization.arrayToDataTable([
          ['Gender', 'Percentage'],
          ['Female', 100 * selValue], // Must be a number. Convert the string to number by using «*1».
          ['Male', 100 - (100 * selValue)]

        ]);
        var options = {
          title: selText,
          colors: ['#AF7AC5', '#5DADE2']
        };

        var chart = new google.visualization.PieChart(
          document.getElementById('piechart')
        );
        chart.draw(data, options);
      }

    </script>

<div class = "container">
  <link rel="stylesheet" type="text/css" href = "../static/style2.css">
  <h3 style = "color:white; text-align: center;">Select movie and we find out the Percentage of women on the movie crew </h3>
    <div class="form-group row">
      <div class="col-4">
        <div id="piechart" style="width: 900px; height: 200px;"></div>
        <select id="chart" name='select1' onchange="drawChart()">
          <option value="" disabled selected hidden>Select movie</option>
          {% for movie in movies_lst %}
            <option value = "{{ movie[2] }}" > {{ movie[1] }} </option>
          {% endfor %}
        </select>
      </div>
    </div>
</div>

{% endblock %}
